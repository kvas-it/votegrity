<!doctype html>
<html>
  <head>

    <base href="/" />
    <title>Votegrity</title>

    <link rel="stylesheet" href="res/style.css" />

    <!-- libraries -->
    <script src="cr/cryptico.js"></script>
    <script src="jq/jquery.js"></script>
    <script src="ap/ayepromise.js"></script>

    <!-- application modules -->
    <script src="js/registry.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/store.js"></script>
    <script src="js/crypto.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/moderator.js"></script>
    <script src="js/counter.js"></script>
    <script src="js/voter.js"></script>
    <script src="js/keygen.js"></script>
    <script src="js/main.js"></script>

  </head>
  <body>

    <!-- navigation bar -->
    <div id="navbar">
      <div id="user" class="right">
        <span id="user-info">Anonymous</span>
        <button id="logout-button" class="hidden">log out</button>
      </div>
      <div id="menu">&nbsp;</div>
    </div>

    <!-- error display area -->
    <div id="error">
      <span id="error-message"></span>
    </div>

    <!-- loading placeholder -->
    <div id="loading">
      Loading...
    </div>


    <!-- auth form module -->
    <div id="auth-form" class="hidden">
      <form id="login-form" action="#">
        Enter password to log in
        <input type="password" name="password" id="password-input" />
        <button id="login-button">submit</button>
      </form>
    </div>


    <!-- main state for moderator -->
    <div id="mod-main" class="hidden">
      You're the moderator.
    </div>


    <!-- key management interface -->
    <div id="mod-keys" class="hidden">
      <h1>Key management</h1>

      <p>
        Moderator public key<span id="key-moderator-status"></span>
        <button class="hidden" id="key-moderator-save">save</button><br/>
        <textarea id="key-moderator"></textarea>
      </p>

      <p>
        Counter public key<span id="key-counter-status"></span>
        <button class="hidden" id="key-counter-save">save</button><br/>
        <textarea id="key-counter"></textarea>
      </p>
    </div>


    <!-- moderator voter list editing interface -->
    <div id="mod-voters" class="hidden">
      <h1>Voter list</h1>

      <div id="mod-voter-list"><em>loading...</em></div>

      <p>&nbsp;</p>
      Add voters (format of voter records is NAME:E-MAIL)<br/>
      <textarea id="new-voters"></textarea><br/>
      <button id="add-voters">add voters</button>
    </div>


    <!-- ballot distribution and collection-->
    <div id="mod-ballots" class="hidden">
      <h1>Ballot management</h1>
    </div>


    <!-- main state for counter -->
    <div id="cnt-main" class="hidden">
      You're the counter.
    </div>


    <!-- main state for voter -->
    <div id="vot-main" class="hidden">
      You're a voter.
    </div>


    <!-- keygen module -->
    <div id="keygen" class="hidden">
      <h1>Key generation interface</h1>
      <button id="keygen-generate">Generate password and key</button>
      <p class="info">
        Save your password reliably (for example using a password manager
        like 1Password) and don't ever share it with anyone.
      </p>
      Password<br/>
      <input type="text" class="big" readonly id="keygen-password" />
      <p class="info">
        Send the content of the textarea below to the moderator.
        It's not confidential but it's important that the public
        key in the system is this one as it will be used to
        verify your signatures and encrypt information sent to you.
      </p>
      Public information (for moderator)<br/>
      <textarea readonly id="keygen-public-info"></textarea>
    </div>

  </body>
</html>
